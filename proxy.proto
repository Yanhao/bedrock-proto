syntax = "proto3";

package bedrock.proxy;
option cc_generic_services = true;

enum Error {
    OK = 0;
    NO_SUCH_KEY = 1;
    INVLIAD_PARAMETERS = 2;

    UNKNOWN = 255;
}

message BedRockKvGetRequest {
    uint32 storage_id = 1;
    bytes key = 2;
}

message BedRockKvGetResponse {
    bytes value = 1;

    Error err = 255;
}

message BedRockKvSetRequest {
    uint32 storage_id = 1;
    bytes key = 2;
    bytes value = 3;
}

message BedRockKvSetResponse {
    Error err = 255;
}

message BedRockKvDeleteRequest {
    uint32 storage_id = 1;
    bytes key = 2;
}

message BedRockKvDeleteResponse {
    Error err = 255;
}

service ProxyService {
    rpc BedRockKvSet(BedRockKvSetRequest) returns (BedRockKvSetRequest);
    rpc BedRockKvGet(BedRockKvGetRequest) returns (BedRockKvGetRequest);
    rpc BedRockKvDelete(BedRockKvDeleteRequest) returns (BedRockKvDeleteResponse);
}
